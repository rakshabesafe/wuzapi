openapi: 3.0.0
info:
  title: WUZAPI
  description: "WUZAPI implements a multi user and multi device REST API for WhatsApp.\n\n<h2>Authentication</h2><ul><li>Standard Endpoints: Include the token header with a valid user token (matches tokens stored in the users database table).</li><li>Admin Endpoints: Use the Authorization header with the admin token (set in .env as WUZAPI_ADMIN_TOKEN).</li></ul><h2>Admin Setup:</h2>You can manage users and do some tests by using the builtin dashboard [here](/dashboard).<h3>Add a Sample User via API</h3>Run this command to create a test user:<pre><code>curl -X POST http://localhost:8080/admin/users \\ \n-H \"Authorization: $WUZAPI_ADMIN_TOKEN\" \\ \n-H \"Content-Type: application/json\" \\ \n-d '{\"name\": \"John\", \"token\": \"Z1234ABCCXD\"}' </code> </pre>\n\n<h2>Webhook Configuration</h2>To receive WhatsApp messages:<ul><li>Host your own server (to process incoming messages).</li><li>Set its URL as the webhook via the [webhook](#Webhook) API call.</li></ul><h2>Phone number format:</h2><ul><li>Required: Country code (e.g. <b>5491155553934</b> for Argentina</li><li>Do not prefix with a plus sign (+), as natively whatsapp requires no plus sign prefix.</li></ul>"
  version: '3.0'
  termsOfService: ''
   
schemes:
  - http

paths:
  /admin/users:
    get:
      tags:
        - Admin
      summary: List users
      description: Retrieve a list of users from the database, displaying also connection status and other info.
      security:
        - AdminAuth: []
      responses:
        200:
          description: A JSON array of user objects
          content:
            application/json:
              schema:
                example: { "code": 200, "data": [ { "connected": true, "events": "All", "expiration": 0, "id": "bec45bb93cbd24cbec32941ec3c93a12", "jid": "5491155551122:12@s.whatsapp.net", "loggedIn": true, "name": "Some User", "proxy_url": "", "qrcode": "", "token": "d030sl9aDL39sl3075zz", "webhook": "https://some.domain/webhook" } ], "success": true }
    post:
      tags:
        - Admin
      summary: Add a new user
      description: Add a new user to the database.
      security:
        - AdminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/CreateUser'
      responses:
        201:
          description: User created
          content:
            application/json:
              schema:
                example: {"code":201,"data":{"id":"5663e0c52063ec35d0ba45f7c2011c06","name":"John Doe"},"success":true}
  /admin/users/{id}:
    delete:
      tags:
        - Admin
      summary: Delete a user from DB
      description: Deletes a user by their ID.
      security:
        - AdminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the user to delete
          schema:
            type: string
            example: 4e4942c7dee1deef99ab8fd9f7350de5
      responses:
        200:
          description: User deleted
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"id":"6b927654cada7635a4586bf8fad260a3"},"details":"User deleted successfully","success":true}
  /admin/users/{id}/full:
    delete:
      tags:
        - Admin
      summary: Delete a user from DB, logout and disconnect from whatsapp and clear it up from memory
      description: Deletes a user by their ID, including login out, disconnect and memory cleanup.
      security:
        - AdminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the user to delete
          schema:
            type: string
            example: 4e4942c7dee1deef99ab8fd9f7350de5
      responses:
        200:
          description: User deleted
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"id":"4e4942c7dee1deef99ab8fd9f7350de5","jid":"","name":"mariano"},"details":"User instance removed completely","success":true}
  /newsletter/list:
    get:
      tags:
        - Newsletter
      summary: List subscribed newsletters
      description: Returns complete list of subscribed newsletters
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"Newsletter": [{"id": "120363144038483540@newsletter", "state": {"type": "active" }, "thread_metadata": {"creation_time": "1688746895", "description": {"id": "1689653839450668", "text": "WhatsApp’s official channel. Follow for our latest feature launches, updates, exclusive drops and more.", "update_time": "1689653839450668" }, "invite": "0029Va4K0PZ5a245NkngBA2M", "name": {"id": "1688746895480511", "text": "WhatsApp", "update_time": "1688746895480511" }, "picture": {"direct_path": "/v/t61.24694-24/416962407_970228831134395_8869146381947923973_n.jpg?ccb=11-4&oh=01_Q5AaIRyTfP806JEGJDm0XWU5E-D4LcA-Wj3csSwh1jJTVanC&oe=67D550F1&_nc_sid=5e03e0&_nc_cat=110", "id": "1707950960975554", "type": "IMAGE", "url": "" }, "preview": {"direct_path": "/v/t61.24694-24/416962407_970228831134395_8869146381947923973_n.jpg?stp=dst-jpg_s192x192_tt6&ccb=11-4&oh=01_Q5AaIawuPXJUw9grRFJZtAJEc6QNm0XpqJq4X1Ssi9xNI0Qf&oe=67D550F1&_nc_sid=5e03e0&_nc_cat=110", "id": "1707950960975554", "type": "PREVIEW", "url": "" }, "settings": {"reaction_codes": {"value": "ALL" } }, "subscribers_count": "0", "verification": "verified" }, "viewer_metadata": {"mute": "on", "role": "subscriber" } } ] }, "success": true }
  /webhook:
    get:
      tags:
        - Webhook
      summary: Shows webhook 
      description: |
        Gets the configured webhook and subscribed events.

        ## Webhook

        The following _webhook_ endpoints are used to get or set the webhook that will be called whenever a message or event is received. Available event types are:

        * Message
        * ReadReceipt
        * Presence
        * HistorySync
        * ChatPresence
        * All (subscribes to all event types)
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "subscribe": [ "Message", "ReadReceipt" ], "webhook": "https://example.net/webhook" }, "success": true }

    post:
      tags:
        - Webhook
      summary: Sets webhook 
      description: |
        Sets the webhook that will be used to POST information when messages are received and configures the events to subscribe to.

        ## Webhook

        The following _webhook_ endpoints are used to get or set the webhook that will be called whenever a message or event is received. Available event types are:

        * Message
        * ReadReceipt
        * Presence
        * HistorySync
        * ChatPresence
        * All (subscribes to all event types)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/WebhookSet'
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "webhook": "https://example.net/webhook", "events": ["Message", "ReadReceipt"] }, "success": true }
    delete:
      tags:
        - Webhook
      summary: Deletes webhook 
      description: Removes the configured webhook and clears events for the user
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Webhook and events deleted successfully" }, "success": true }
    put:
      tags:
        - Webhook
      summary: Updates webhook
      description: |
        Updates the webhook URL, events, and activation status.

        ## Webhook

        The following _webhook_ endpoints are used to get or set the webhook that will be called whenever a message or event is received. Available event types are:

        * Message
        * ReadReceipt
        * Presence
        * HistorySync
        * ChatPresence
        * All (subscribes to all event types)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/WebhookUpdate'
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "webhook": "https://example.net/webhook", "events": ["Message", "ReadReceipt"], "active": true }, "success": true }

  /session/connect:
    post:
      tags:
        - Session 
      summary: connects to WhatsApp servers
      description: "Initiates connection to WhatsApp servers.\n\nIf there is no previous session created, it will generate a QR code that can be retrieved via the [qr](#/Session/get_session_qr) API call.\n\nIf the optional Subscribe is supplied it will limit webhooks to the specified event types: Message,ReadReceipt,Presence,HistorySync,ChatPresence.\n\nIf no Subscribe is supplied it will subscribe to All events.\n\nIf Immediate is set to false, the action will wait for 10 seconds to retrieve actual connection status from whatsapp, otherwise it will return immediatly.\n\nWhen setting Immediate to true you should check for actual connection status after a few seconds via the [status](#/Session/get_session_status) API call as your connection might fail if the session was closed from another device."
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Connect'

      responses:
        200:
          description: Response

          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "details": "Connected!", "events": "Message", "jid": "5491155555555.0:53@s.whatsapp.net", "webhook": "https://some.site/webhook?request=parameter" }, "success": true }
  /session/disconnect:
    post:
      tags:
        - Session 
      summary: disconnects from WhatsApp servers
      description: Closes connection to WhatsApp servers. Session is not terminated, that means that calling connect again will reuse the previous session avoiding QR code scanning 
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Disconnected" }, "success": true }
  /session/logout:
    post:
      tags:
        - Session 
      summary: Logs out from WhatsApp 
      description: Closes connection to WhatsApp servers and terminate session. That means that next time connect is issued, QR scan will be needed from phone to connect again
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Logged out" }, "success": true }
  /session/status:
    get:
      tags:
        - Session 
      summary: Gets connection and session status
      description: Gets status from connection, including websocket connection and logged in status (session)
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Connected": true, "LoggedIn": true }, "success": true }
  /session/pairphone:
    post:
      tags:
        - Session
      summary: Gets pair by phone code
      description: Gets the code to enter into whatsapp client when pairing by phone number instead of QR code
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Pairphone'
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "LinkingCode" : "9H3J-H3J8" }, "success": true }
  /session/qr:
    get:
      tags:
        - Session 
      summary: Gets QR code for scanning
      description: Gets QR code if the user is connected but not logged in. If the user is already logged in, QRCode will be empty.
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "QRCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAABlBMVEX///8AAABVwtN+AAAEw0lEQVR42uyZPa7zqhaGX0ThLmsCkZlGCktMKaU76FxmSkgUmQZWJkA6CuT3avlLvrNvvRMX9x6KXWQ/UhCsn2cR/Lv+v5YhudQ6njEs1bBjqGYDwlJJpoOAArtUbK4Pi5jN3qPAlCkstcAeBazMUaoj78RpxGW4yWYzWVfmzwFLlLX4O+VkkucN5tFDOxiIAvfoA/X4uVQ4sgUcCBTYCG7AEGGKvbdrBabQ8OOyvg3ovm4ynqfLXJ9rvi+303ie5vm/gvZXgK6BLC7fo5hiG4KwW7b6I/2+DJi1+ybVFQyx6o6bbKPVDCyjTwcBZB9uevBtAEafhiosCFH/4kNA8i1gg02B3KxezGbzEjUCDgIwYppR3SNdgtY3H0M1j8xFzCscvg/8uQvZAB9piidv1RXfZhbHdAwAlzsCNCaJDdMF4WQeeSGACZ8BMNl4FZYJA7j2YalPPhhngetHAaZPcyBg2wyYdAk0fKQ5yPja5PcBzTZW4uxJ2bTGwmxnu/BH4vwSgEsYItcCH+VZJt/AYhmHatbXdX8d2JvaTVzxCVW2aVhqheXSqvnR9b4L6AoUx3zX+jZd5rDB5jbLuv0txd8GRs+liuv+TsKloQWujxxRYf5s8gOA7fMVK9PQuDtMNCx2ibIdCMCy1s0yQU6Od9bqim1BuzoOAgzTHOiKv0d5Mt+XClN8DBxN/wxg2G2DbDYNJExCqE+Ne8poXoLxdUA/w5VrnxBQ9fjlqaJMwWgPAzLjtfKRW4A21ojnStX0dX2d5PeB0fawu2pChcuM4bk+tLmbMn0GMJslb5ptDXySbb5W1+0SyVcJOgRIQxSc7X0RUSvGs2DSeaz4gwCMNi/7XNACZc0KbPBtruv2KQA+DVFladBvt4xywhmh1Xd2fx8wzGTUltqCWrHWgqL7Jg8E0hSiFJfbUJ/Fpx3L1OHsVR8+APgoZMclUKvcft2+zTBrwjHArosim4ZcfW4Y4lVWnYXg2A8C9C5aEFXDoEJzmXFyfZoH/p0Wvw7oXoZbNQ823ase1wk2DQ3u7XK/BkzOqovwpM68Ko+jUyPFu6F8H4DvqsAuaUMZJ6+azjTPdS32KMBkLnpQ3VPnbsZgiktALW91/wDQEV5V7gT4JT6L62GRzeV0EDDC7rVFax2ZW6Aa6V5h/FEAgBlSbLrMVScU1s09+jxwG/9q87cB/Yxw3acBsk2Yw+nPf9Y1p88ARlNPtvPkF3LlPQYp8MtSx/FtpF8H4DNrZd8fOtTOxJSzXdo/c/fXAbN2DLeKs1dxHeEZZVWaju/3h18CcDk3qePZpllglDZ89MCq8nIQoDPAVaPi3iAFFwS1xjjr+HcYwD+hri216vBZzQbbZsE44RhAp+sQxfTpApGCoV1NOfsl4pX+nwC65a1uLnkK9TSuVTOhaQ4cBOzvtDcZXU5Bdl28SrF9HqrZJhwD7O/VsZpi7xSz7pXW6ahQ1/dB/RrYf2QhLBmr1lNINVRZfw9BBwArc4SszGlWWd2fxB9cFvJQYKnUUWAgV22y5v1e/ffHpiOAqMLCiOpymwNGtxvk9s8mfwcU2CiydqvJbdKuSX0K8a/KHQDsMQkyeVbtISFif8mRcfwRtF8F/l3/O+s/AQAA///lM0dZSaTeTQAAAABJRU5ErkJggg==" }, "success": true }
  /session/proxy:
    post:
      tags:
        - Session
      summary: Set Proxy Configuration
      description: |
        Sets or disables the proxy configuration for the user.
        Provide a JSON payload with "proxy_url" (e.g. "http://host:port" or "socks5://user:pass@host:port") and "enable" (boolean).
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                proxy_url:
                  type: string
                  description: Proxy URL in format "http://host:port" or "socks5://user:pass@host:port"
                enable:
                  type: boolean
                  description: Whether to enable or disable the proxy.
              required:
                - proxy_url
                - enable
      responses:
        "200":
          description: Proxy configured successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  Details:
                    type: string
                    example: Proxy configured successfully
                  ProxyURL:
                    type: string
                    example: socks5://user:pass@host:port
        "400":
          description: Bad Request
        "500":
          description: Internal Server Error
  /user/info:
    post:
      tags:
        - User
      summary: Gets information about users on WhatsApp
      description: Gets extra information about users on WhatsApp
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Checkuser'


      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Users": { "5491155553935@s.whatsapp.net": { "Devices": [], "PictureID": "", "Status": "", "VerifiedName": null }, "5491155553934@s.whatsapp.net": { "Devices": [ "5491155553934.0:0@s.whatsapp.net", "5491155955934.0:6@s.whatsapp.net", ], "PictureID": "1582328807", "Status": "🇦🇷", "VerifiedName": null } } }, "success": true } 
  /user/check:
    post:
      tags:
        - User
      summary: Checks if user has WhatsApp
      description: Checks if users have an account with WhatsApp
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Checkuser'


      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Users": [ { "IsInWhatsapp": true, "JID": "5491155553934@s.whatsapp.net", "Query": "5491155553934", "VerifiedName": "Company Name" }, { "IsInWhatsapp": false, "JID": "5491155553935@s.whatsapp.net", "Query": "5491155553935", "VerifiedName": "" } ] }, "success": true }
  /user/presence:
    post:
      tags:
        - User
      summary: Send user global presence
      description: Sends user presence Available or Unavailable
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/UserPresence'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"Details": "Presence set successfuly"}, "success": true}
        400:
          description: Response
          content:
            application/json:
              schema:
                example: {"code": 400,"error": "Invalid presence type. Allowed values: 'available', 'unavailable'","success": false}

  /user/avatar:
    post:
      tags:
        - User
      summary: Gets profile picture information
      description: Gets information about users profile pictures on WhatsApp, either a thumbnail (Preview=true) or full picture.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Checkavatar'


      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "URL": "https://pps.whatsapp.net/v/t61.24694-24/227295214_112447507729487_4643695328050510566_n.jpg?stp=dst-jpg_s96x96&ccb=11-4&oh=ja432434a91e8f41d86d341bx889c217&oe=543222A4", "ID": "1645308319", "Type": "preview", "DirectPath": "/v/t61.24694-24/227295214_112447507729487_4643695328050510566_n.jpg?stp=dst-jpg_s96x96&ccb=11-4&oh=ja432434a91e8f41d86d341ba889c217&oe=543222A4" }
  /user/contacts:
    get:
      tags:
        - User
      summary: Gets all contacts for the account
      description: Gets complete list of contacts for the connected account
      security:
        - ApiKeyAuth: []
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "5491122223333@s.whatsapp.net": { "BusinessName": "", "FirstName": "", "Found": true, "FullName": "", "PushName": "FOP2" }, "549113334444@s.whatsapp.net": { "BusinessName": "", "FirstName": "", "Found": true, "FullName": "", "PushName": "Asternic" } } }
  /chat/delete:
    post:
      tags:
        - Chat 
      summary: Deletes a message sent by user
      description: Deletes a messages sent by the same user
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/DeleteMessage'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Message deleted" }, "success": true }

  /chat/markread:
    post:
      tags:
        - Chat 
      summary: Marks a message as read
      description: Marks one or more received messages as read
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/Markread'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Message(s) marked as read" }, "success": true }
  /chat/react:
    post:
      tags:
        - Chat 
      summary: Reacts to a message
      description: Sends a reaction to some message. Phone, Body and Id are mandatory. If reaction is for your own message, prefix Phone with 'me:'. Body should be the reaction emoji.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/ReactionText'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"3EB06F9067F80BAB89FF","Timestamp":"2022-05-10T12:49:08-03:00"},"success":true}
  /chat/send/text:
    post:
      tags:
        - Chat 
      summary: Sends a text message
      description: Sends a text message. Phone and Body are mandatory. If no Id is supplied, a random one will be generated. ContextInfo is optional and used when repyling to some message. StanzaId is the message id we are replying to and participant who wrote that message. If sending a new message, ContextInfo can be ommited altogether.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageText'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/edit:
    post:
      tags:
        - Chat
      summary: Edits a previously sent message
      description: Edits a message already sent by the same user. Provide the message ID and new content.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Id:
                  type: string
                  description: The ID of the message to edit
                  example: "90B2F8B13FAC8A9CF6B06E99C7834DC5"
                Phone:
                  type: string
                  description: The WhatsApp number or JID (use 'me:' prefix if your own message)
                  example: "5491122223333"
                Body:
                  type: string
                  description: New message content
                  example: "This is the updated message"
              required:
                - Id
                - Phone
                - Body
      responses:
        200:
          description: Message edited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      Details:
                        type: string
                        example: Message updated
                  success:
                    type: boolean
                    example: true
        400:
          description: Invalid parameters or message not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  error:
                    type: string
                    example: Invalid message ID or new content
                  success:
                    type: boolean
                    example: false
  /chat/send/image:
    post:
      tags:
        - Chat 
      summary: Sends an image/picture message
      description: Sends an image message (must be base64 encoded in image/png or image/jpeg formats)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageImage'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/audio:
    post:
      tags:
        - Chat 
      summary: Sends an audio message
      description: Sends an audio message (must be base64 encoded in opus format, mime type audio/ogg)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageAudio'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/document:
    post:
      tags:
        - Chat 
      summary: Sends a document message
      description: Sends any document (must be base64 encoded using application/octet-stream mime)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageDocument'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
 
  /chat/send/template:
    post:
      tags:
        - Chat 
      summary: Sends a template message 
      description: Sends a template message, that can contain quick reply buttons, url buttons and call buttons
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageTemplate'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/video:
    post:
      tags:
        - Chat 
      summary: Sends a video message
      description: Sends a video message (must be base64 encoded in video/mp4 or video/3gpp format. Only H.264 video codec and AAC audio codec is supported.)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageVideo'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/sticker:
    post:
      tags:
        - Chat 
      summary: Sends a sticker message
      description: Sends a sticker message (must be base64 encoded in image/webp format)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageSticker'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
 
  /chat/send/location:
    post:
      tags:
        - Chat 
      summary: Sends a location message
      description: Sends a location message
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageLocation'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
 
  /chat/send/contact:
    post:
      tags:
        - Chat 
      summary: Sends a contact message
      description: Sends a contact message in VCARD format
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessageContact'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}
  /chat/send/poll:
    post:
      tags:
        - Chat
      summary: Sends a Poll to some group
      description: Sends a Poll message. Group should contain the gid (group id), similar to 120363312246943103@g.us.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/MessagePoll'
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Details":"Sent","Id":"90B2F8B13FAC8A9CF6B06E99C7834DC5","Timestamp":"2022-04-20T12:49:08-03:00"},"success":true}

  /chat/downloadimage:
    post:
      tags:
        - Chat 
      summary: Downloads Image from message
      description: Downloads an Image from a message and returns it Base64 media encoded
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/DownloadImage'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Data":"data:image/jpeg;base64,iVBORw0KGgoA5CYII...=","Mimetype":"image/jpeg"},"success":true}

  /chat/downloadvideo:
    post:
      tags:
        - Chat 
      summary: Downloads Video from message
      description: Downloads a Video from a message and returns it Base64 media encoded
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/DownloadImage'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Data":"data:video/mp4;base64,iVBORw0KGgoA5CYII...=","Mimetype":"video/mp4"},"success":true}

  /chat/downloaddocument:
    post:
      tags:
        - Chat 
      summary: Downloads Document from message
      description: Downloads a Document from a message and returns it Base64 media encoded
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/DownloadImage'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: {"code":200,"data":{"Data":"data:application/pdf;base64,iVBORw0KGgoA5CYII...=","Mimetype":"application/pdf"},"success":true}

  /chat/presence:
    post:
      tags:
        - Chat 
      summary: Sets chat presence
      description: Sends indication if you are writing or not (state could be either "composing" or "paused"). Optional Media can be set to "audio" for indicating recording a message
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/ChatPresence'

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Chat presence set successfuly" }, "success": true } 

  /group/list:
    get:
      tags:
        - Group 
      summary: List subscribed groups
      description: Returns complete list of subscribed groups
      security:
        - ApiKeyAuth: []

      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Groups": [ { "AnnounceVersionID": "1650572126123738", "DisappearingTimer": 0, "GroupCreated": "2022-04-21T17:15:26-03:00", "IsAnnounce": false, "IsEphemeral": false, "IsLocked": false, "JID": "120362023605733675@g.us", "Name": "Super Group", "NameSetAt": "2022-04-21T17:15:26-03:00", "NameSetBy": "5491155554444@s.whatsapp.net", "OwnerJID": "5491155554444@s.whatsapp.net", "ParticipantVersionID": "1650234126145738", "Participants": [ { "IsAdmin": true, "IsSuperAdmin": true, "JID": "5491155554444@s.whatsapp.net" }, { "IsAdmin": false, "IsSuperAdmin": false, "JID": "5491155553333@s.whatsapp.net" }, { "IsAdmin": false, "IsSuperAdmin": false, "JID": "5491155552222@s.whatsapp.net" } ], "Topic": "", "TopicID": "", "TopicSetAt": "0001-01-01T00:00:00Z", "TopicSetBy": "" } ] }, "success": true }
  /group/invitelink:
    get:
      tags:
        - Group 
      summary: Get Group Invite Link
      description: Gets the invite link for a group, optionally resetting it to create a new/different one
      security:
        - ApiKeyAuth: []
      parameters:
        - in: query
          name: groupJID
          schema:
            type: string
          required: true
          description: The JID of the group to retrieve information from
        - in: query
          name: reset
          schema:
            type: boolean
          required: false
          description: Whether to revoke the old invite link and generate a new one (default is false)
      responses:
        200:
          description: Successfull response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "InviteLink": "https://chat.whatsapp.com/HffXhYmzzyJGec61oqMXiz" }, "success": true }
  /group/info:
    get:
      tags:
        - Group 
      summary: Gets group information
      description: Retrieves information about a specific group
      security:
        - ApiKeyAuth: []
      parameters:
        - in: query
          name: groupJID
          schema:
            type: string
          required: true
          description: The JID of the group to retrieve information from
      responses:
        200:
          description: Successful response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "AnnounceVersionID": "1650572126123738", "DisappearingTimer": 0, "GroupCreated": "2022-04-21T17:15:26-03:00", "IsAnnounce": false, "IsEphemeral": false, "IsLocked": false, "JID": "120362023605733675@g.us", "Name": "Super Group", "NameSetAt": "2022-04-21T17:15:26-03:00", "NameSetBy": "5491155554444@s.whatsapp.net", "OwnerJID": "5491155554444@s.whatsapp.net", "ParticipantVersionID": "1650234126145738", "Participants": [ { "IsAdmin": true, "IsSuperAdmin": true, "JID": "5491155554444@s.whatsapp.net" }, { "IsAdmin": false, "IsSuperAdmin": false, "JID": "5491155553333@s.whatsapp.net" }, { "IsAdmin": false, "IsSuperAdmin": false, "JID": "5491155552222@s.whatsapp.net" } ], "Topic": "", "TopicID": "", "TopicSetAt": "0001-01-01T00:00:00Z", "TopicSetBy": "" }, "success": true }

  /group/photo:
    post:
      tags:
        - Group 
      summary: Changes group photo
      description: Allows you to change a group photo/image. Returns the Picture ID number
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#definitions/GroupPhoto'
 
      responses:
        200:
          description: Response
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Group Photo set successfully", "PictureID": "1222332123" }, "success": true }

  /group/leave:
    post:
      tags:
        - Group
      summary: Leave a WhatsApp group
      description: Removes the authenticated user from the specified group.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupLeave'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Left group successfully" }, "success": true }

  /group/name:
    post:
      tags:
        - Group
      summary: Change group name
      description: Updates the name of the specified WhatsApp group.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupName'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Group Name set successfully" }, "success": true }

  /group/topic:
    post:
      tags:
        - Group
      summary: Set group topic/description
      description: Updates the topic or description of the specified WhatsApp group.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupTopic'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Group Topic set successfully" }, "success": true }

  /group/announce:
    post:
      tags:
        - Group
      summary: Set group announce mode
      description: Enables or disables "announce" mode (admin-only messages) for the specified group.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupAnnounce'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Group Announce mode set successfully" }, "success": true }

  /group/join:
    post:
      tags:
        - Group
      summary: Join a WhatsApp group via invite code
      description: Joins the WhatsApp group using the given invite code.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupJoin'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Joined group successfully" }, "success": true }

  /group/inviteinfo:
    post:
      tags:
        - Group
      summary: Get information about a group invite code
      description: Returns details about a WhatsApp group given an invite code.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/GroupInviteInfo'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "InviteInfo": { "GroupName": "Test Group", "GroupJID": "120363312246943103@g.us" } }, "success": true }

  /group/updateparticipants:
    post:
      tags:
        - Group
      summary: Add or remove participants from a group
      description: Adds or removes participants from the specified WhatsApp group.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/UpdateGroupParticipants'
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                example: { "code": 200, "data": { "Details": "Participants updated successfully" }, "success": true }
  /chat/autoreply:
    post:
      tags:
        - Chat
      summary: Add an auto-reply
      description: Adds a new auto-reply configuration for the authenticated user.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Phone:
                  type: string
                  example: "1234567890"
                Body:
                  type: string
                  example: "I am currently out of office."
              required:
                - Phone
                - Body
      responses:
        "201":
          description: Auto-reply added successfully.
          content:
            application/json:
              schema:
                example: {"code": 201, "data": {"detail": "Auto-reply added successfully", "id": "unique-id-string"}, "success": true}
        "400":
          description: Bad Request (e.g., missing fields).
        "401":
          description: Unauthorized.
        "409":
          description: Conflict (auto-reply for this phone number already exists).
        "500":
          description: Internal Server Error.
    delete:
      tags:
        - Chat
      summary: Delete an auto-reply
      description: Deletes an auto-reply configuration based on the phone number for the authenticated user.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Phone:
                  type: string
                  example: "1234567890"
              required:
                - Phone
      responses:
        "200":
          description: Auto-reply deleted successfully.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "Auto-reply deleted successfully"}, "success": true}
        "400":
          description: Bad Request (e.g., missing phone number).
        "401":
          description: Unauthorized.
        "404":
          description: Auto-reply not found.
        "500":
          description: Internal Server Error.
    get:
      tags:
        - Chat
      summary: List configured auto-replies
      description: Retrieves all auto-reply configurations for the authenticated user.
      security:
        - ApiKeyAuth: []
      responses:
        "200":
          description: A list of auto-reply configurations.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/definitions/AutoReplyEntry'
        "401":
          description: Unauthorized
        "500":
          description: Internal Server Error

  /mode/autoreply:
    post:
      tags:
        - Mode
      summary: Add or Update Mode Autoreply
      description: Adds a new autoreply entry for a specific mode or updates an existing one (based on ModeName and Phone).
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/ModeAutoreplyRequest'
      responses:
        "201":
          description: Mode autoreply added or updated successfully.
          content:
            application/json:
              schema:
                example: {"code": 201, "data": {"detail": "Mode autoreply added/updated successfully"}, "success": true}
        "400":
          description: Bad Request (e.g., invalid ModeName, missing fields).
          content:
            application/json:
              schema:
                example: {"code": 400, "error": "Invalid ModeName: must be alphanumeric", "success": false}
        "500":
          description: Internal Server Error.
    delete:
      tags:
        - Mode
      summary: Delete Mode Autoreply
      description: Deletes autoreply entries for a specific mode. If 'Phone' is provided, only that specific entry is deleted. Otherwise, all entries for the mode are deleted.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/ModeAutoreplyDeleteRequest'
      responses:
        "200":
          description: Mode autoreply entries deleted successfully.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "1 autoreply entry(s) deleted for mode 'work'"}, "success": true}
        "400":
          description: Bad Request (e.g., invalid ModeName).
        "500":
          description: Internal Server Error.
    get:
      tags:
        - Mode
      summary: Get Mode Autoreplies
      description: Retrieves autoreply entries. If 'modeName' query parameter is provided, filters by that mode. Otherwise, retrieves all mode autoreplies for the user.
      security:
        - ApiKeyAuth: []
      parameters:
        - name: modeName
          in: query
          required: false
          description: The name of the mode to filter autoreplies by (case-insensitive, alphanumeric).
          schema:
            type: string
            example: "vacation"
      responses:
        "200":
          description: A list of mode autoreply configurations.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/definitions/ModeAutoreplyEntry'
                example: {"code": 200, "data": [{"ModeName": "office", "Phone": "1234567890", "Message": "I am in office."}], "success": true}
        "400":
          description: Bad Request (e.g., invalid modeName format).
        "500":
          description: Internal Server Error.

  /mode/enablemode:
    post:
      tags:
        - Mode
      summary: Enable an Autoreply Mode
      description: Activates a specific autoreply mode. This clears any existing active autoreplies and populates them with entries from the specified mode.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/EnableModeRequest'
      responses:
        "200":
          description: Mode enabled successfully.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "Mode 'vacation' enabled successfully. 5 autoreplies activated."}, "success": true}
        "400":
          description: Bad Request (e.g., invalid ModeName).
        "404":
          description: Mode not found (no entries in autoreply_modes for the given ModeName). This might be implicitly handled by a 200 OK with "0 autoreplies activated".
        "500":
          description: Internal Server Error.

  /mode/disablemode:
    post:
      tags:
        - Mode
      summary: Disable an Autoreply Mode
      description: Deactivates the specified autoreply mode if it is currently active. This clears active autoreplies and sets the current mode to none.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/DisableModeRequest'
      responses:
        "200":
          description: Mode disabled successfully or was not active.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "Mode 'vacation' disabled successfully."}, "success": true}
        "400":
          description: Bad Request (e.g., invalid ModeName).
        "500":
          description: Internal Server Error.

  /mode/currentmode:
    get:
      tags:
        - Mode
      summary: Get Current Active Autoreply Mode
      description: Retrieves the name of the currently active autoreply mode for the user.
      security:
        - ApiKeyAuth: []
      responses:
        "200":
          description: Successfully retrieved the current mode.
          content:
            application/json:
              schema:
                $ref: '#/definitions/CurrentModeResponse'
        "500":
          description: Internal Server Error.

  /mode/clear:
    post:
      tags:
        - Mode
      summary: Clear All Autoreply Modes
      description: Deactivates any currently active autoreply mode and clears all entries from the active autoreply list for the user. It does not delete entries from `autoreply_modes`.
      security:
        - ApiKeyAuth: []
      responses:
        "200":
          description: All modes cleared and current mode deactivated successfully.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "All modes cleared and current mode deactivated successfully."}, "success": true}
        "500":
          description: Internal Server Error.

  /autoreply/contactgroupauth:
    post:
      tags:
        - Autoreply Contacts
      summary: Store Google Contacts API Auth Token
      description: Stores or updates the Google OAuth2 access token for the authenticated user, enabling integration with Google Contacts.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/AuthTokenRequest'
      responses:
        "200":
          description: Auth token stored successfully.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "Auth token stored successfully"}, "success": true}
        "400":
          description: Bad Request (e.g., missing AuthToken).
          content:
            application/json:
              schema:
                example: {"code": 400, "error": "Missing AuthToken in Payload", "success": false}
        "500":
          description: Internal Server Error.

  /autoreply/contactgroup:
    post:
      tags:
        - Autoreply Contacts
      summary: Add contacts from a Google Contacts group to an autoreply mode
      description: Fetches contacts from a specified Google Contacts group (using a stored auth token) and adds/updates them in the specified autoreply mode with the given message.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/ContactGroupRequest'
      responses:
        "200":
          description: Contacts processed and added/updated for the mode.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "3 contacts processed and added/updated for mode 'work'. 1 contacts skipped."}, "success": true}
        "400":
          description: Bad Request (e.g., missing fields, invalid ModeName).
        "403":
          description: Forbidden (Google Contacts API token not configured).
          content:
            application/json:
              schema:
                example: {"code": 403, "error": "Google Contacts API token not configured. Please use /autoreply/contactgroupauth.", "success": false}
        "500":
          description: Internal Server Error.
    delete:
      tags:
        - Autoreply Contacts
      summary: Remove contacts from a Google Contacts group from an autoreply mode
      description: Fetches contacts from a specified Google Contacts group (using a stored auth token) and removes them from the specified autoreply mode.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/definitions/ContactGroupDeleteRequest'
      responses:
        "200":
          description: Contacts processed for deletion from the mode.
          content:
            application/json:
              schema:
                example: {"code": 200, "data": {"detail": "3 contacts from group 'Friends' processed for deletion from mode 'weekend'. 2 entries actually deleted. 1 contacts skipped."}, "success": true}
        "400":
          description: Bad Request (e.g., missing fields, invalid ModeName).
        "403":
          description: Forbidden (Google Contacts API token not configured).
        "500":
          description: Internal Server Error.

definitions:
  AuthTokenRequest:
    type: object
    required:
      - AuthToken
    properties:
      AuthToken:
        type: string
        description: "User-provided Google OAuth2 Access Token."
        example: "ya29.a0AfH6SM..."
  AutoReplyEntry: # Existing definition, ensure new ones are placed correctly relative to it.
    type: object
    properties:
      phone:
        type: string
        description: "The phone number for which the auto-reply is configured."
        example: "1234567890"
      body:
        type: string
        description: "The message body of the auto-reply."
        example: "I'm currently unavailable. I'll get back to you soon."
      last_sent_at:
        type: string
        format: date-time
        description: "The timestamp when this auto-reply was last sent. Omitted if never sent or if the value is null."
        example: "2023-10-27T10:30:00Z"
        nullable: true
    required:
      - phone
      - body
  ContactGroupDeleteRequest:
    type: object
    required:
      - ModeName
      - GroupName
    properties:
      ModeName:
        type: string
        description: "Name of the mode (alphanumeric)."
        example: "work"
      GroupName:
        type: string
        description: "Name of the Google Contacts group whose members will be removed from the mode."
        example: "Old Colleagues"
  ContactGroupRequest:
    type: object
    required:
      - ModeName
      - GroupName
      - Message
    properties:
      ModeName:
        type: string
        description: "Name of the mode to associate contacts with (alphanumeric)."
        example: "work"
      GroupName:
        type: string
        description: "Name of the Google Contacts group to fetch contacts from."
        example: "Colleagues"
      Message:
        type: string
        description: "Autoreply message for these contacts within the specified mode."
        example: "Currently busy with work tasks."
  ModeAutoreplyRequest: # Existing definition
    type: object
    required:
      - ModeName
      - Phone
      - Message
    properties:
      ModeName:
        type: string
        description: "Name of the mode (alphanumeric)."
        example: "work"
      Phone:
        type: string
        description: "Target phone number for the autoreply."
        example: "1234567890"
      Message:
        type: string
        description: "Message to be sent as autoreply."
        example: "I am currently in a meeting."
  ModeAutoreplyDeleteRequest:
    type: object
    required:
      - ModeName
    properties:
      ModeName:
        type: string
        description: "Name of the mode to delete entries from (alphanumeric)."
        example: "work"
      Phone:
        type: string
        description: "Optional. Target phone number. If provided, only this specific entry for the mode is deleted."
        example: "1234567890"
  EnableModeRequest:
    type: object
    required:
      - ModeName
    properties:
      ModeName:
        type: string
        description: "Name of the mode to enable (alphanumeric)."
        example: "vacation"
  DisableModeRequest:
    type: object
    required:
      - ModeName
    properties:
      ModeName:
        type: string
        description: "Name of the mode to disable (alphanumeric)."
        example: "vacation"
  ModeAutoreplyEntry:
    type: object
    properties:
      ModeName:
        type: string
        description: "Name of the mode."
        example: "office"
      Phone:
        type: string
        description: "Target phone number."
        example: "1234567890"
      Message:
        type: string
        description: "Autoreply message content."
        example: "Currently at the office."
  CurrentModeResponse:
    type: object
    properties:
      current_mode_name:
        type: string
        nullable: true
        description: "Name of the currently active mode. Null if no mode is active."
        example: "vacation"
  AutoReplyEntry:
    type: object
    properties:
      phone:
        type: string
        description: "The phone number for which the auto-reply is configured."
        example: "1234567890"
      body:
        type: string
        description: "The message body of the auto-reply."
        example: "I'm currently unavailable. I'll get back to you soon."
      last_sent_at:
        type: string
        format: date-time
        description: "The timestamp when this auto-reply was last sent. Omitted if never sent or if the value is null."
        example: "2023-10-27T10:30:00Z"
        nullable: true
    required:
      - phone
      - body
  User:
    type: object
    properties:
      id:
        type: string
        example: 4e4942c7dee1deef99ab8fd9f7350de5
      name:
        type: string
        example: John Doe

  CreateUser:
    type: object
    required:
      - name
      - token
    properties:
      name:
        type: string
        example: John Doe
      token:
        type: string
        example: "1234ABCD"

  DeleteUser:
    type: object
    properties:
      id:
        type: string
        example: 4e4942c7dee1deef99ab8fd9f7350de5
  GroupPhoto:
    type: object
    properties:
      GroupJID:
        type: string
        example: "120362023605733675@g.us"
      Image:
        type: string
        example: "data:image/jpeg;base64,Akd9300..."
  GroupInfo:
    type: object
    properties:
      GroupJID:
        type: string
        example: "120362023605733675@g.us"
  GroupInviteLink:
    type: object
    properties:
      GroupJID:
        type: string
        example: "120362023605733675@g.us"
      Reset:
        type: boolean
        example: false
  Connect:
    type: object
    properties:
      Subscribe:
        type: string
        example: ["Message","ChatPresence"]
      Immediate:
        type: boolean
  DownloadImage:
    type: object
    required:
      - Url
      - MediaKey
      - Mimetype
      - FileSHA256
      - FileLength
    properties:
      Url:
        type: string
      DirectPath:
        type: string
      MediaKey:
        type: string
      Mimetype:
        type: string
      FileEncSHA256:
        type: string
      FileSHA256:
        type: string
      FileLength:
        type: number
  ChatPresence:
    type: object
    required: 
      - Phone
      - State
    properties:
      Phone:
        type: string
        example: "5491155553935"
      State:
        type: string
        example: composing
      Media: 
        type: string
        example: audio
  UserPresence:
    type: object
    required:
      - type
    properties:
      type:
        type: string
        example: available
  MessageContact:
    type: object
    required: 
      - Phone
      - Name
      - Vcard
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Name:
        type: string
        example: John
      Id:
        type: string
        example: "ABCDABCD1234"
      Vcard:
        type: string
        example: "BEGIN:VCARD\nVERSION:3.0\nN:Doe;John;;;\nFN:John Doe\nORG:Example.com Inc.;\nTITLE:Imaginary test person\nEMAIL;type=INTERNET;type=WORK;type=pref:johnDoe@example.org\nTEL;type=WORK;type=pref:+1 617 555 1212\nTEL;type=WORK:+1 (617) 555-1234\nTEL;type=CELL:+1 781 555 1212\nTEL;type=HOME:+1 202 555 1212\nitem1.ADR;type=WORK:;;2 Enterprise Avenue;Worktown;NY;01111;USA\nitem1.X-ABADR:us\nitem2.ADR;type=HOME;type=pref:;;3 Acacia Avenue;Hoitem2.X-ABADR:us\nEND:VCARD"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"


  MessageLocation:
    type: object
    required: 
      - Phone
      - Latitude
      - Longitude
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Name:
        type: string
        example: Party
      Id:
        type: string
        example: "ABCDABCD1234"
      Latitude:
        type: float
        example: 48.858370
      Longitude:
        type: float
        example: 2.294481
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
  ReactionText:
    type: object
    required: 
      - Phone
      - Body
      - Id 
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Body:
        type: string
        example: "❤️"
      Id:
        type: string
        example: "me:3EB06F9067F80BAB89FF"

  MessagePoll:
    type: object
    required:
      - Group
      - Header
      - Options
    properties:
      Group:
        type: string
        example: "120363417042313103@g.us"
      Header:
        type: string
        example: "What's your favorite color"
      Options:
        type: array
        description: An array of options for the poll.
        items:
          type: string
          example: "Red"
      Id:
        type: string
        example: "3EB06F9067F80BAB89FF"

  MessageText:
    type: object
    required:
      - Phone
      - Body
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Body:
        type: string
        example: How you doin
      Id:
        type: string
        example: "ABCDABCD1234"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
  MessageImage:
    type: object
    required: 
      - Phone
      - Image 
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Image:
        type: string
        example: data:image/jpeg;base64,iVBORw0
      Caption:
        type: string
        example: Image Description
      Id:
        type: string
        example: "ABCDABCD1234"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
  MessageAudio:
    type: object
    required: 
      - Phone
      - Audio
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Audio:
        type: string
        example: "data:audio/ogg;base64,iVBORw0a"
      Id:
        type: string
        example: "ABCDABCD1234"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
  MessageVideo:
    type: object
    required: 
      - Phone
      - Video 
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Video:
        type: string
        example: "data:video/mp4;base64,iVBORw0"
      Caption:
        type: string
        example: "my video"
      Id:
        type: string
        example: "ABCDABCD1234"
      JpegThumbnail:
        type: string
        example: "AA00D010"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
  MessageSticker:
    type: object
    required: 
      - Phone
      - Sticker
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Sticker:
        type: string
        example: "data:image/webp;base64,iVBORw0"
      Id:
        type: string
        example: "ABCDABCD1234"
      PngThumbnail:
        type: string
        example: "AA00D010"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId: 
            type: string
            example: "3EB06F9067F80BAB89FF" 
          Participant: 
            type: string
            example: "5491155553935@s.whatsapp.net"
 

  MessageDocument:
    type: object
    required: 
      - Phone
      - Document 
      - FileName 
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Document:
        type: string
        example: data:application/octet-stream;base64,aG9sYSBxdWUKdGFsCmNvbW8KZXN0YXMK
      FileName:
        type: string
        example: file.txt
      Id:
        type: string
        example: "ABCDABCD1234"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId:
            type: string
            example: "3EB06F9067F80BAB89FF"
          Participant:
            type: string
            example: "5491155553935@s.whatsapp.net"
  MessageTemplate:
    type: object
    required: 
      - Phone
      - Content 
    properties:
      Phone:
        type: string
        example: "5491155553935"
      Content:
        type: string
        example: Message title
      Footer:
        type: string
        example: Text below title, above buttons
      Buttons:
          type: object
          example: [{"DisplayText":"Yes","Type":"quickreply"},{"DisplayText":"No","Type":"quickreply"},{"DisplayText":"Visit Site","Type":"url","Url":"https://www.fop2.com"},{"DisplayText":"Callme","Type":"call","PhoneNumber":"1155553934"}]
          properties:
            DisplayText:
              type: string
              example: Text for Button
            Type:
              type: quickreply|url|call
      Id:
        type: string
        example: "ABCDABCD1234"
      ContextInfo:
        type: object
        required:
          - StanzaId
          - Participant
        properties:
          StanzaId:
            type: string
            example: "3EB06F9067F80BAB89FF"
          Participant:
            type: string
            example: "5491155553935@s.whatsapp.net"
  DeleteMessage:
    type: object
    required:
      - Id
    properties:
      Id:
        type: string
        example: "1234-abcd-21234"
  Markread:
    type: object
    required:
      - Id
      - Chat
    properties:
      Id:
        type: object
        example: ["AABBCC11223344","DDEEFF55667788"]
      Chat:
        type: string
        example: 5491155553934.0:1@s.whatsapp.net
      Sender:
        type: string
        example: 5491155553111.0:1@s.whatsapp.net
  Pairphone:
    type: object
    required:
      - Phone
    properties:
      Phone:
        type: string
        example: "5491155553934"
  Checkuser:
    type: object
    required:
      - Phone
    properties:
      Phone:
        type: object
        example: ["5491155553934","5491155553935"]
  Checkavatar:
    type: object
    required:
      - Phone
      - Preview
    properties:
      Phone:
        type: string 
        example: "5491155553934"
      Preview:
        type: bool
        example: true
  Webhook:
    type: object
    required:
      - WebhookURL
    properties:
      WebhookURL:
        type: string
        example: http://server/webhook

  WebhookSet:
    type: object
    required:
      - webhook
      - events
    properties:
      webhook:
        type: string
        description: The URL of the webhook
        example: "https://example.net/webhook"
      events:
        type: array
        items:
          type: string
        description: List of events to subscribe to
        example: ["Message", "ReadReceipt"]

  WebhookUpdate:
    type: object
    properties:
      webhook:
        type: string
        description: The URL of the webhook
        example: "https://example.net/webhook"
      events:
        type: array
        items:
          type: string
        description: List of events to subscribe to
        example: ["Message", "ReadReceipt"]
      Active:
        type: boolean
        description: Whether the webhook should be active or not
        example: true

  GroupLeave:
    type: object
    required:
      - groupJID
    properties:
      groupJID:
        type: string
        description: The JID of the group to leave (e.g., 120363312246943103@g.us)
        example: 120363312246943103@g.us

  GroupName:
    type: object
    required:
      - groupJID
      - name
    properties:
      groupJID:
        type: string
        description: The JID of the group to rename
        example: 120363312246943103@g.us
      name:
        type: string
        description: The new name for the group
        example: My New Group Name

  GroupTopic:
    type: object
    required:
      - groupJID
      - topic
    properties:
      groupJID:
        type: string
        description: The JID of the group to set the topic for
        example: 120363312246943103@g.us
      topic:
        type: string
        description: The new topic/description for the group
        example: Welcome to our project group!

  GroupAnnounce:
    type: object
    required:
      - groupJID
      - announce
    properties:
      groupJID:
        type: string
        description: The JID of the group to set announce mode
        example: 120363312246943103@g.us
      announce:
        type: boolean
        description: Whether to enable (true) or disable (false) announce mode
        example: true

  GroupJoin:
    type: object
    required:
      - inviteCode
    properties:
      inviteCode:
        type: string
        description: The invite code or link to join the group
        example: HffXhYmzzyJGec61oqMXiz

  GroupInviteInfo:
    type: object
    required:
      - inviteCode
    properties:
      inviteCode:
        type: string
        description: The group invite code to get information for
        example: HffXhYmzzyJGec61oqMXiz

  UpdateGroupParticipants:
    type: object
    required:
      - groupJID
      - action
      - participants
    properties:
      groupJID:
        type: string
        description: The JID of the group
        example: 120363312246943103@g.us
      action:
        type: string
        description: Action to perform ("add" to add participants, "remove" to remove participants)
        enum: [add, remove]
        example: add
      participants:
        type: array
        items:
          type: string
          description: List of participant JIDs (e.g., 5491112345678@s.whatsapp.net)
        example: [ "5491112345678@s.whatsapp.net", "5491123456789@s.whatsapp.net" ]
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: token
    AdminAuth:
      type: apiKey
      in: header
      name: Authorization

security:
  - ApiKeyAuth: []
